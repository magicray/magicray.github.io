<!doctype html>
<html lang="en">
<head>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css">
<title>Stocks</title>
</head>
<body>
    <div class="div container">
        <table id="table" class="table table-compact table-striped table-bordered">
            <thead>
                <tr>
                <th rowspan=2>Rank</th>
                <th rowspan=2>Name</th>
                <th colspan=2>Profitability</th>
                <th colspan=2>YoY Quarterly Growth %</th>
                <th colspan=2>Valuation</th>
                <th rowspan=2>Price</th>
                <th rowspan=2>Market Cap</th>
                </tr><tr>
                <th>ROCE</th>
                <th>ROE</th>
                <th>Profit</th>
                <th>Sales</th>
                <th>Yield</th>
                <th>PE</th>
                </tr>
            </thead>
        </table>
    </div>
</body>
<script>
$('#table').dataTable({
    'bPaginate': false,
    'ajax': {
        'url': 'https://magicray.github.io/magicrank.json',
        'dataSrc': function(data) {
            return data.map(d => [
                d['rank'],
                d['name'],
                Math.floor(d['roce']),
                Math.floor(d['roe']),
                Math.floor(d['qtr_profit_var']),
                Math.floor(d['qtr_sales_var']),
                Math.floor(d['earnings_yield']),
                Math.floor(d['p_e']),
                Math.floor(d['cmp_rs']),
                Math.floor(d['mar_cap_rs_cr']),
            ])
        }},
})
</script>
</html>
